# CodeWiki - æ™ºèƒ½ä»£ç ä»“åº“åˆ†æç³»ç»Ÿ

[![Go Version](https://img.shields.io/badge/Go-1.24+-blue.svg)](https://golang.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Kratos](https://img.shields.io/badge/Kratos-v2.7.3-blue.svg)](https://github.com/go-kratos/kratos)
[![React](https://img.shields.io/badge/React-18.2.0-blue.svg)](https://reactjs.org)
[![TypeScript](https://img.shields.io/badge/TypeScript-4.9+-blue.svg)](https://www.typescriptlang.org)

CodeWikiæ˜¯ä¸€ä¸ªåŸºäºGoè¯­è¨€å’ŒReactçš„æ™ºèƒ½ä»£ç ä»“åº“åˆ†æç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨è§£æä»£ç ç»“æ„ã€åˆ†æå‡½æ•°è°ƒç”¨å…³ç³»ï¼Œå¹¶æä¾›å¯è§†åŒ–çš„ä»£ç æ¢ç´¢ä½“éªŒã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨Dockerå¿«é€Ÿä½“éªŒ
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/codewiki.git
cd codewiki

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# è®¿é—®Webç•Œé¢
open http://localhost:3000
```

### æ‰‹åŠ¨å®‰è£…
```bash
# 1. å®‰è£…ä¾èµ–
make init

# 2. é…ç½®æ•°æ®åº“
# ç¼–è¾‘ configs/config.yaml

# 3. ç”Ÿæˆä»£ç 
make all

# 4. å¯åŠ¨åç«¯
make build && ./bin/codewiki -conf ./configs

# 5. å¯åŠ¨å‰ç«¯
cd web && npm install && npm start
```

## ğŸš€ ä¸»è¦ç‰¹æ€§

### ğŸ” ä»£ç ä»“åº“ç®¡ç†
- **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒGoã€Javaã€Pythonã€Rustç­‰å¤šç§ç¼–ç¨‹è¯­è¨€
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨åˆ†æä»£ç ç»“æ„ã€åŒ…ä¾èµ–ã€æ–‡ä»¶å…³ç³»
- **ä»“åº“ç±»å‹**: æ”¯æŒæœ¬åœ°ä»“åº“å’ŒGitHubè¿œç¨‹ä»“åº“
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡å¯¼å…¥å’Œåˆ†æå¤šä¸ªä»“åº“

### ğŸ“Š ä»£ç ç»“æ„åˆ†æ
- **åŒ…ç»“æ„å¯è§†åŒ–**: æ ‘å½¢å±•ç¤ºåŒ…å’Œæ–‡ä»¶çš„å±‚æ¬¡ç»“æ„
- **ä¾èµ–å…³ç³»å›¾**: å¯è§†åŒ–å±•ç¤ºæ¨¡å—é—´çš„ä¾èµ–å…³ç³»
- **ä»£ç å¯¼èˆª**: å¿«é€Ÿå®šä½å’Œæµè§ˆä»£ç æ–‡ä»¶

### ğŸ•¸ï¸ å‡½æ•°è°ƒç”¨å›¾åˆ†æ
- **è°ƒç”¨é“¾è¿½è¸ª**: è‡ªåŠ¨è¯†åˆ«å‡½æ•°è°ƒç”¨å…³ç³»
- **äº¤äº’å¼å›¾è¡¨**: æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€å±•å¼€/æŠ˜å æ“ä½œ
- **å®æ—¶åˆ†æ**: ç‚¹å‡»å‡½æ•°åå³å¯æŸ¥çœ‹è°ƒç”¨å…³ç³»å›¾
- **èŠ‚ç‚¹è¯¦æƒ…**: æ˜¾ç¤ºå‡½æ•°ç­¾åã€è°ƒç”¨æ¬¡æ•°ç­‰è¯¦ç»†ä¿¡æ¯

### ğŸ¨ ç°ä»£åŒ–Webç•Œé¢
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **è¯­æ³•é«˜äº®**: æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç é«˜äº®
- **å®æ—¶æœç´¢**: å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶å’Œå‡½æ•°
- **å¤šæ ‡ç­¾é¡µ**: åŒæ—¶æŸ¥çœ‹å¤šä¸ªä»“åº“æˆ–åˆ†æç»“æœ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Frontend  â”‚    â”‚   HTTP Server   â”‚    â”‚   gRPC Server   â”‚
â”‚   (React/TS)    â”‚â—„â”€â”€â–ºâ”‚   (Kratos)      â”‚â—„â”€â”€â–ºâ”‚   (Kratos)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                       â”‚
                                â–¼                       â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  Business Logic â”‚    â”‚   Data Layer    â”‚
                       â”‚   (Biz Layer)   â”‚    â”‚  (MySQL+Neo4j)  â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

**åç«¯ (Go)**
- **æ¡†æ¶**: [Kratos v2](https://github.com/go-kratos/kratos) - å¾®æœåŠ¡æ¡†æ¶
- **æ•°æ®åº“**: MySQL (å…³ç³»æ•°æ®) + Neo4j (å›¾æ•°æ®)
- **API**: gRPC + HTTP RESTful
- **ä»£ç ç”Ÿæˆ**: Protocol Buffers + Wireä¾èµ–æ³¨å…¥
- **å¹¶å‘å¤„ç†**: Antsåç¨‹æ± 

**å‰ç«¯ (React)**
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Create React App
- **å›¾è¡¨åº“**: è‡ªå®šä¹‰SVGå›¾å½¢æ¸²æŸ“
- **è¯­æ³•é«˜äº®**: Prism.js
- **çŠ¶æ€ç®¡ç†**: React Hooks

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚

- **Go**: 1.24+
- **Node.js**: 16+
- **MySQL**: 8.0+
- **Neo4j**: 5.0+
- **Git**: æœ€æ–°ç‰ˆæœ¬

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/codewiki.git
cd codewiki
```

### 2. åç«¯è®¾ç½®

#### å®‰è£…Goä¾èµ–å’Œå·¥å…·
```bash
make init
```

#### é…ç½®æ•°æ®åº“
ç¼–è¾‘ `configs/config.yaml`:
```yaml
server:
  http:
    addr: 0.0.0.0:8000
    timeout: 1s
  grpc:
    addr: 0.0.0.0:9000
    timeout: 1s

data:
  neo4j:
    target: bolt://127.0.0.1:7687
    username: neo4j
    password: <your-password>
  database:
    driver: mysql
    source: root:123456@tcp(127.0.0.1:3306)/codewiki?parseTime=True
```

#### ç”Ÿæˆä»£ç å’Œæ„å»º
```bash
# ç”Ÿæˆæ‰€æœ‰ä»£ç 
make all

# æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
make build

# è¿è¡ŒæœåŠ¡
./bin/codewiki -conf ./configs
```

### 3. å‰ç«¯è®¾ç½®

```bash
cd web
npm install
npm start
```

å‰ç«¯å°†åœ¨ http://localhost:3000 å¯åŠ¨

## ğŸ“š ä½¿ç”¨æŒ‡å—

### åˆ›å»ºå¹¶åˆ†æä»£ç ä»“åº“

1. **åˆ›å»ºä»“åº“**: åœ¨Webç•Œé¢ä¸­å¡«å†™ä»“åº“ä¿¡æ¯ï¼ˆåç§°ã€è·¯å¾„ã€ç±»å‹ç­‰ï¼‰
2. **è§¦å‘åˆ†æ**: ç‚¹å‡»"åˆ†æ"æŒ‰é’®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è§£æä»£ç ç»“æ„
3. **æŸ¥çœ‹ç»“æœ**: åˆ†æå®Œæˆåå¯æŸ¥çœ‹åŒ…ç»“æ„ã€æ–‡ä»¶æ ‘ã€å‡½æ•°è°ƒç”¨å…³ç³»

### æ¢ç´¢ä»£ç å…³ç³»

1. **æŸ¥çœ‹æ–‡ä»¶æ ‘**: ç‚¹å‡»"æŸ¥çœ‹æ ‘"æŒ‰é’®æµè§ˆä»“åº“ç»“æ„
2. **é˜…è¯»ä»£ç **: ç‚¹å‡»æ–‡ä»¶åæŸ¥çœ‹ä»£ç å†…å®¹ï¼Œæ”¯æŒè¯­æ³•é«˜äº®
3. **åˆ†æè°ƒç”¨é“¾**: ç‚¹å‡»å‡½æ•°åæŸ¥çœ‹è°ƒç”¨å…³ç³»å›¾
4. **äº¤äº’å¼æ¢ç´¢**: åœ¨è°ƒç”¨å›¾ä¸­æ‹–æ‹½èŠ‚ç‚¹ã€å±•å¼€/æŠ˜å ã€æŸ¥çœ‹è¯¦æƒ…

### è°ƒç”¨å›¾æ“ä½œ

- **æ‹–æ‹½èŠ‚ç‚¹**: è°ƒæ•´èŠ‚ç‚¹ä½ç½®
- **ç‚¹å‡»èŠ‚ç‚¹**: æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- **å±•å¼€/æŠ˜å **: æ˜¾ç¤º/éšè—å­èŠ‚ç‚¹
- **ç¼©æ”¾å¹³ç§»**: ä½¿ç”¨é¼ æ ‡æ»šè½®å’Œæ‹–æ‹½ç”»å¸ƒ
- **é‡ç½®è§†å›¾**: æ¢å¤é»˜è®¤å¸ƒå±€

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç ç”Ÿæˆ

```bash
# ç”ŸæˆAPIä»£ç 
make api

# ç”Ÿæˆå†…éƒ¨é…ç½®
make config

# ç”Ÿæˆä¾èµ–æ³¨å…¥ä»£ç 
(cd cmd/codewiki && wire)

# ä¸€é”®ç”Ÿæˆæ‰€æœ‰
make all
```

### æ·»åŠ æ–°åŠŸèƒ½

1. **åç«¯**: åœ¨`internal/`ç›®å½•ä¸‹æ·»åŠ æ–°çš„ä¸šåŠ¡é€»è¾‘
2. **å‰ç«¯**: åœ¨`web/src/components/`ä¸‹åˆ›å»ºæ–°çš„Reactç»„ä»¶
3. **API**: ä¿®æ”¹`api/`ä¸‹çš„protoæ–‡ä»¶ï¼Œé‡æ–°ç”Ÿæˆä»£ç 

### æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
go test ./...

# å‰ç«¯æµ‹è¯•
cd web
npm test
```

## ğŸ³ Dockeréƒ¨ç½²

### æ„å»ºé•œåƒ
```bash
docker build -t codewiki:latest .
```

### è¿è¡Œå®¹å™¨
```bash
docker run --rm -p 8000:8000 -p 9000:9000 \
  -v $(pwd)/configs:/data/conf codewiki:latest
```

## ğŸ“Š APIæ¥å£

ä¸»è¦HTTPæ¥å£ï¼ˆå®Œæ•´æ–‡æ¡£è§ `api/openapi.yaml`ï¼‰:

- `GET /v1/api/repos` - è·å–ä»“åº“åˆ—è¡¨
- `POST /v1/api/repos` - åˆ›å»ºæ–°ä»“åº“
- `GET /v1/api/repos/{id}` - è·å–ä»“åº“è¯¦æƒ…
- `DELETE /v1/api/repos/{id}` - åˆ é™¤ä»“åº“
- `POST /v1/api/repos/{id}/analyze` - è§¦å‘ä»£ç åˆ†æ
- `GET /v1/api/repos/{id}/tree` - è·å–ä»“åº“ç»“æ„æ ‘
- `GET /v1/api/functions/{name}/calls` - æŸ¥è¯¢å‡½æ•°è°ƒç”¨é“¾

### ç¤ºä¾‹è¯·æ±‚

```bash
# åˆ›å»ºä»“åº“
curl -X POST http://localhost:8000/v1/api/repos \
  -H 'Content-Type: application/json' \
  -d '{
    "name": "my-project",
    "repoType": 0,
    "path": "/path/to/project",
    "description": "My Go project",
    "language": 1
  }'

# åˆ†æä»“åº“
curl -X POST http://localhost:8000/v1/api/repos/{id}/analyze

# æŸ¥è¯¢è°ƒç”¨é“¾
curl http://localhost:8000/v1/api/functions/main/calls
```

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
codewiki/
â”œâ”€â”€ api/                    # APIå®šä¹‰å’Œç”Ÿæˆçš„ä»£ç 
â”‚   â”œâ”€â”€ codewiki/          # ä¸»è¦APIæ¥å£
â”‚   â””â”€â”€ openapi.yaml       # OpenAPIè§„èŒƒæ–‡æ¡£
â”œâ”€â”€ cmd/                    # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â””â”€â”€ codewiki/          # ä¸»ç¨‹åº
â”œâ”€â”€ configs/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ internal/               # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ biz/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ conf/              # é…ç½®ç»“æ„
â”‚   â”œâ”€â”€ data/              # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ pkg/               # å…¬å…±åŒ…
â”‚   â””â”€â”€ server/            # æœåŠ¡å™¨å®ç°
â”œâ”€â”€ web/                    # å‰ç«¯Reactåº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ types/         # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ third_party/            # ç¬¬ä¸‰æ–¹ä¾èµ–
â”œâ”€â”€ Dockerfile              # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ Makefile                # æ„å»ºè„šæœ¬
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ä»¥ä¸‹æŒ‡å—ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Kratos](https://github.com/go-kratos/kratos) - Goå¾®æœåŠ¡æ¡†æ¶
- [Neo4j](https://neo4j.com/) - å›¾æ•°æ®åº“
- [React](https://reactjs.org/) - å‰ç«¯æ¡†æ¶
- [Ants](https://github.com/panjf2000/ants) - Goåç¨‹æ± 

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository](https://github.com/your-username/codewiki)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-username/codewiki/issues)
- è®¨è®ºäº¤æµ: [Discussions](https://github.com/your-username/codewiki/discussions)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼

